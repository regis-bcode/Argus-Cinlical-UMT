<!doctype html>
<html lang="pt-br">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Fluxo de Atendimento — Senhas, Painéis, Registro e Encaminhamento</title>

  <!-- Icons (Font Awesome) -->
  <link rel="preconnect" href="https://cdnjs.cloudflare.com" crossorigin>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

  <style>
    :root{
      --bg: #070A10;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.08);
      --stroke: rgba(255,255,255,.12);
      --text: rgba(255,255,255,.86);
      --muted: rgba(255,255,255,.62);
      --soft: rgba(255,255,255,.12);
      --accent: #7C5CFF;
      --accent2: #29D3FF;
      --good: #2EE59D;
      --warn: #FFCC66;
      --bad: #FF5C7A;
      --shadow: 0 24px 60px rgba(0,0,0,.55);
      --radius: 18px;
      --radius2: 26px;
      --max: 1180px;
      --glass: saturate(130%) blur(16px);
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html{scroll-behavior:smooth}
    body{
      margin:0;
      font-family: var(--sans);
      background: radial-gradient(1200px 700px at 12% 8%, rgba(124,92,255,.28), transparent 55%),
                  radial-gradient(900px 600px at 92% 18%, rgba(41,211,255,.20), transparent 55%),
                  radial-gradient(700px 420px at 55% 92%, rgba(46,229,157,.18), transparent 55%),
                  linear-gradient(180deg, #050812, #04050B 35%, #04040A 100%);
      color: var(--text);
      overflow-x:hidden;
    }

    a{color:inherit; text-decoration:none}
    .wrap{max-width:var(--max); margin:0 auto; padding: 0 20px}

    /* Sticky header */
    .topbar{
      position: sticky; top:0; z-index:50;
      backdrop-filter: var(--glass);
      background: rgba(7,10,16,.72);
      border-bottom: 1px solid var(--stroke);
    }
    .topbar .row{
      display:flex; align-items:center; justify-content:space-between;
      padding: 12px 0;
      gap: 14px;
    }
    .brand{
      display:flex; align-items:center; gap: 12px; min-width: 240px;
    }
    .brand .logo{
      width: 38px; height: 38px; border-radius: 14px;
      background:
        radial-gradient(14px 14px at 30% 30%, rgba(255,255,255,.55), transparent 60%),
        linear-gradient(135deg, rgba(124,92,255,.95), rgba(41,211,255,.85));
      box-shadow: 0 12px 30px rgba(124,92,255,.22);
      border: 1px solid rgba(255,255,255,.14);
      display:grid; place-items:center;
    }
    .brand .logo i{color: rgba(255,255,255,.9); font-size: 16px}
    .brand .t{display:flex; flex-direction:column; line-height:1.1;}
    .brand .t b{font-size: 14px; letter-spacing:.2px}
    .brand .t span{font-size: 12px; color: var(--muted)}
    .nav{display:flex; gap: 8px; align-items:center; flex-wrap:wrap; justify-content:flex-end;}
    .chip{
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.78);
      font-size: 12px;
      display:flex; gap: 8px; align-items:center;
      transition: .18s ease;
      user-select:none;
    }
    .chip:hover{transform: translateY(-1px); border-color: rgba(255,255,255,.22); background: rgba(255,255,255,.06)}
    .chip i{opacity:.9}
    .chip.active{
      background: linear-gradient(135deg, rgba(124,92,255,.26), rgba(41,211,255,.18));
      border-color: rgba(124,92,255,.38);
      color: rgba(255,255,255,.90);
    }

    /* Hero */
    .hero{position:relative; padding: 54px 0 24px;}
    .heroGrid{
      display:grid;
      grid-template-columns: 1.25fr .75fr;
      gap: 20px;
      align-items:stretch;
    }
    .headline{
      border-radius: var(--radius2);
      border: 1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      box-shadow: var(--shadow);
      padding: 26px;
      position:relative;
      overflow:hidden;
    }
    .headline:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(800px 320px at 10% 0%, rgba(124,92,255,.22), transparent 55%),
                  radial-gradient(600px 260px at 110% 10%, rgba(41,211,255,.18), transparent 55%);
      opacity:.9;
      pointer-events:none;
    }
    .headline > *{position:relative}
    .kicker{
      display:flex; gap:10px; align-items:center;
      color: rgba(255,255,255,.82);
      font-size: 12px;
      letter-spacing:.3px;
      text-transform: uppercase;
    }
    .kicker .pill{
      display:inline-flex; align-items:center; gap:8px;
      padding: 7px 10px;
      border-radius: 999px;
      background: rgba(124,92,255,.16);
      border: 1px solid rgba(124,92,255,.30);
    }
    .kicker .pill i{color: rgba(255,255,255,.92)}
    h1{
      margin: 12px 0 10px;
      font-size: clamp(26px, 3.4vw, 40px);
      letter-spacing: -.4px;
      line-height: 1.08;
    }
    .sub{
      margin:0;
      color: var(--muted);
      font-size: 14.5px;
      line-height: 1.55;
      max-width: 70ch;
    }
    .heroActions{
      margin-top: 16px;
      display:flex; flex-wrap:wrap; gap: 10px;
    }
    .btn{
      border: 1px solid var(--stroke);
      border-radius: 999px;
      padding: 10px 14px;
      font-size: 13px;
      color: rgba(255,255,255,.86);
      background: rgba(255,255,255,.04);
      display:inline-flex; align-items:center; gap: 10px;
      transition: .18s ease;
      user-select:none;
    }
    .btn:hover{transform: translateY(-1px); background: rgba(255,255,255,.06); border-color: rgba(255,255,255,.22)}
    .btn.primary{
      border-color: rgba(124,92,255,.44);
      background: linear-gradient(135deg, rgba(124,92,255,.30), rgba(41,211,255,.18));
    }
    .btn.primary:hover{border-color: rgba(124,92,255,.65)}
    .btn i{opacity:.95}

    .sidecard{
      border-radius: var(--radius2);
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      box-shadow: var(--shadow);
      padding: 18px;
      display:flex;
      flex-direction:column;
      justify-content:space-between;
      overflow:hidden;
      position:relative;
    }
    .sidecard:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(700px 300px at 20% 0%, rgba(46,229,157,.14), transparent 55%),
                  radial-gradient(600px 260px at 90% 30%, rgba(255,204,102,.10), transparent 58%);
      pointer-events:none;
      opacity:1;
    }
    .sidecard > *{position:relative}
    .meta{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    .metaitem{
      padding: 12px;
      border-radius: 16px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
    }
    .metaitem b{display:block; font-size: 12px; color: rgba(255,255,255,.85); margin-bottom: 6px}
    .metaitem span{display:block; font-size: 12px; color: var(--muted); line-height:1.35}
    .badges{display:flex; flex-wrap:wrap; gap: 8px; margin-top: 14px;}
    .badge{
      font-size: 12px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      color: rgba(255,255,255,.78);
      display:inline-flex; gap: 8px; align-items:center;
    }
    .badge i{opacity:.95}
    .badge.good{border-color: rgba(46,229,157,.35); background: rgba(46,229,157,.08)}
    .badge.warn{border-color: rgba(255,204,102,.35); background: rgba(255,204,102,.08)}
    .badge.acc{border-color: rgba(124,92,255,.35); background: rgba(124,92,255,.08)}

    /* Sections / cards */
    .section{padding: 28px 0 18px;}
    .sectionHeader{
      display:flex; align-items:flex-end; justify-content:space-between;
      gap: 12px;
      margin-bottom: 14px;
    }
    .sectionHeader h2{margin:0; font-size: 18px; letter-spacing:.1px;}
    .sectionHeader p{
      margin:0;
      color: var(--muted);
      font-size: 12.5px;
      max-width: 76ch;
      line-height:1.45;
    }
    .grid{
      display:grid;
      grid-template-columns: repeat(12, 1fr);
      gap: 14px;
    }
    .card{
      border-radius: var(--radius);
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      padding: 16px;
      box-shadow: 0 18px 44px rgba(0,0,0,.30);
      position:relative;
      overflow:hidden;
    }
    .card:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(600px 220px at 18% 0%, rgba(124,92,255,.12), transparent 55%),
                  radial-gradient(520px 220px at 110% 20%, rgba(41,211,255,.10), transparent 55%);
      opacity:.7;
      pointer-events:none;
    }
    .card > *{position:relative}
    .card h3{
      margin:0 0 10px;
      font-size: 14px;
      color: rgba(255,255,255,.88);
      display:flex; align-items:center; gap: 10px;
    }
    .card h3 i{color: rgba(255,255,255,.92)}
    .card p{margin:0; color: var(--muted); font-size: 13px; line-height: 1.55}
    .list{margin: 10px 0 0; padding: 0 0 0 18px; color: rgba(255,255,255,.74); font-size: 13px; line-height: 1.55;}
    .list li{margin: 6px 0}
    .hint{
      margin-top: 10px;
      padding: 10px 12px;
      border-radius: 14px;
      border: 1px dashed rgba(255,255,255,.22);
      color: rgba(255,255,255,.70);
      background: rgba(255,255,255,.03);
      font-size: 12.5px;
      line-height: 1.45;
    }

    .span-4{grid-column: span 4}
    .span-5{grid-column: span 5}
    .span-6{grid-column: span 6}
    .span-7{grid-column: span 7}
    .span-8{grid-column: span 8}
    .span-12{grid-column: span 12}

    /* ====== STATES (CORRIGIDO: simetria, tags, indentação) ====== */
    .stateWrap{
      display:grid;
      grid-template-columns: 1fr;
      gap: 12px;
    }

    .states{
      display:grid;
      grid-template-columns: repeat(4, minmax(0, 1fr));
      gap: 12px;

      /* simetria por linha */
      grid-auto-rows: 1fr;
      align-items: stretch;
    }

    .state{
      border-radius: 16px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      padding: 12px;

      height: 100%;
      min-height: 104px;

      display:flex;
      flex-direction:column;
      gap: 10px;

      position:relative;
      overflow:hidden;
    }
    .state:before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(420px 140px at 10% 0%, rgba(255,255,255,.06), transparent 58%);
      pointer-events:none;
      opacity:.9;
    }
    .state > *{position:relative}

    .state .top{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
    }

    .state .name{
      flex: 1 1 auto;
      min-width: 0;

      font-weight: 700;
      font-size: 12.5px;
      color: rgba(255,255,255,.88);
      letter-spacing: .1px;
      line-height: 1.25;

      /* padroniza altura do título (até 2 linhas) */
      display: -webkit-box;
      -webkit-box-orient: vertical;
      -webkit-line-clamp: 2;
      overflow: hidden;
    }

    .tag{
      flex: 0 0 auto;
      white-space: nowrap;

      font-size: 11px;
      line-height: 1;
      padding: 7px 10px;
      border-radius: 999px;

      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      color: rgba(255,255,255,.72);

      max-width: 42%;
      overflow: hidden;
      text-overflow: ellipsis;

      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap: 6px;
    }
    .tag i{font-size: 11px; line-height: 1; opacity: .95;}

    .tag.acc{border-color: rgba(124,92,255,.35); background: rgba(124,92,255,.08)}
    .tag.good{border-color: rgba(46,229,157,.35); background: rgba(46,229,157,.08)}
    .tag.warn{border-color: rgba(255,204,102,.35); background: rgba(255,204,102,.08)}
    .tag.bad{border-color: rgba(255,92,122,.35); background: rgba(255,92,122,.08)}

    .state .desc{
      font-size: 12px;
      color: var(--muted);
      line-height: 1.45;
      margin: 0;
    }

    .transitions{
      border-radius: 18px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      padding: 14px;
    }
    .transitions h4{
      margin:0 0 10px; font-size: 13px; color: rgba(255,255,255,.86);
      display:flex; align-items:center; gap: 10px;
    }
    .kv{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }
    .kvi{
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.02);
      padding: 10px 12px;
    }
    .kvi b{display:block; font-size: 12px; color: rgba(255,255,255,.86); margin-bottom: 6px}
    .kvi span{display:block; font-size: 12px; color: var(--muted); line-height:1.4}
    .mono{font-family:var(--mono)}

    /* Accordions */
    details{
      border-radius: 18px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      padding: 12px 14px;
    }
    details + details{margin-top: 10px}
    summary{
      list-style:none;
      cursor:pointer;
      display:flex; align-items:center; justify-content:space-between; gap: 10px;
      user-select:none;
    }
    summary::-webkit-details-marker{display:none}
    .sumLeft{
      display:flex; align-items:center; gap: 10px;
      font-weight: 700;
      color: rgba(255,255,255,.86);
      font-size: 13px;
    }
    .sumLeft i{opacity:.95}
    .sumRight{
      color: rgba(255,255,255,.66);
      font-size: 12px;
      display:flex; align-items:center; gap: 10px;
    }
    details[open] .sumRight .chev{transform: rotate(180deg)}
    .chev{transition: transform .18s ease}
    .content{
      margin-top: 10px;
      color: rgba(255,255,255,.76);
      font-size: 13px;
      line-height: 1.6;
      padding-left: 2px;
    }
    .content ul{margin: 8px 0 0; padding-left: 18px}
    .content li{margin: 6px 0}

    /* Table */
    .tableWrap{
      border-radius: 18px;
      border: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
      overflow:hidden;
    }
    table{width:100%; border-collapse: collapse; font-size: 12.5px;}
    thead th{
      text-align:left;
      padding: 12px 12px;
      background: rgba(255,255,255,.05);
      color: rgba(255,255,255,.84);
      border-bottom: 1px solid rgba(255,255,255,.10);
    }
    tbody td{
      padding: 10px 12px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      color: rgba(255,255,255,.75);
      vertical-align:top;
    }
    tbody tr:hover td{background: rgba(255,255,255,.02);}
    .permit{
      display:inline-flex; align-items:center; gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      font-size: 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.02);
      white-space:nowrap;
    }
    .yes{border-color: rgba(46,229,157,.40); background: rgba(46,229,157,.08); color: rgba(255,255,255,.84)}
    .no{border-color: rgba(255,92,122,.35); background: rgba(255,92,122,.08); color: rgba(255,255,255,.82)}
    .notes{color: rgba(255,255,255,.62); font-size: 12px; line-height:1.45;}

    /* Footer */
    .footer{padding: 28px 0 34px; color: rgba(255,255,255,.62); font-size: 12px;}
    .footer .line{
      border-top: 1px solid rgba(255,255,255,.10);
      padding-top: 14px;
      display:flex; justify-content:space-between; gap: 12px; flex-wrap:wrap;
    }
    .kbd{
      font-family: var(--mono);
      font-size: 11px;
      padding: 3px 7px;
      border-radius: 8px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.04);
      color: rgba(255,255,255,.75);
    }

    /* Responsive */
    @media (max-width: 980px){
      .heroGrid{grid-template-columns: 1fr}
      .brand{min-width:auto}
      .states{grid-template-columns: repeat(2, minmax(0, 1fr))}
      .tag{max-width: 50%;}
      .kv{grid-template-columns: 1fr}
      .span-4,.span-5,.span-6,.span-7,.span-8,.span-12{grid-column: span 12}
      .nav{justify-content:flex-start}
      .meta{grid-template-columns: 1fr}
    }
    @media (max-width: 560px){
      .states{grid-template-columns: 1fr}
      .tag{max-width: 60%;}
      .chip{padding: 8px 9px}
      table{font-size: 12px}
      thead{display:none}
      tbody tr{display:block; border-bottom: 1px solid rgba(255,255,255,.10)}
      tbody td{display:block; padding: 8px 12px; border-bottom:none}
      tbody td:before{
        content: attr(data-label);
        display:block;
        font-size: 11px;
        color: rgba(255,255,255,.58);
        margin-bottom: 4px;
        letter-spacing:.2px;
        text-transform: uppercase;
      }
    }

    /* Print */
    @media print{
      .topbar, .heroActions, .btn, .chip {display:none !important}
      body{background:#fff; color:#111}
      .card, .headline, .sidecard, details, .tableWrap, .transitions{box-shadow:none !important; background:#fff !important; border-color:#ddd !important}
      .sub, .card p, .content, .notes{color:#333 !important}
    }
  </style>
</head>

<body>
  <header class="topbar" id="top">
    <div class="wrap">
      <div class="row">
        <div class="brand">
          <div class="logo" aria-hidden="true"><i class="fa-solid fa-stethoscope"></i></div>
          <div class="t">
            <b>Fluxo de Atendimento</b>
            <span>Senhas • Painéis • Registro • Encaminhamento • Atendimento</span>
          </div>
        </div>

        <nav class="nav" aria-label="Menu">
          <a class="chip" href="#objetivo"><i class="fa-solid fa-bullseye"></i> Objetivo</a>
          <a class="chip" href="#design"><i class="fa-solid fa-compass-drafting"></i> Princípios</a>
          <a class="chip" href="#filas"><i class="fa-solid fa-layer-group"></i> Filas</a>
          <a class="chip" href="#estados"><i class="fa-solid fa-diagram-project"></i> Estados</a>
          <a class="chip" href="#perfis"><i class="fa-solid fa-user-shield"></i> Perfis</a>
          <a class="chip" href="#prioridade"><i class="fa-solid fa-scale-balanced"></i> Prioridade</a>
          <a class="chip" href="#dados"><i class="fa-solid fa-id-card"></i> Campos</a>
          <a class="chip" href="#carreta"><i class="fa-solid fa-truck-medical"></i> Carreta</a>
          <a class="chip" href="#algoritmo"><i class="fa-solid fa-wand-magic-sparkles"></i> Algoritmo</a>
          <a class="chip" href="#permissoes"><i class="fa-solid fa-table"></i> Permissões</a>
          <a class="chip" href="#parametros"><i class="fa-solid fa-sliders"></i> Parâmetros</a>
        </nav>
      </div>
    </div>
  </header>

  <main>
    <!-- HERO -->
    <section class="hero">
      <div class="wrap">
        <div class="heroGrid">
          <div class="headline">
            <div class="kicker">
              <span class="pill"><i class="fa-solid fa-bolt"></i> Pronto para operação</span>
              <span style="color: rgba(255,255,255,.68)">Governança • Simplicidade • Auditabilidade</span>
            </div>

            <h1>Consolidação do Fluxo de Atendimento</h1>
            <p class="sub">
              Documento de apresentação com visão ponta-a-ponta: emissão de senhas, painéis de chamadas,
              registro administrativo, fila médica por especialidade (ou médico indicado), atendimento, observação,
              finalização e reversões operacionais.
            </p>

            <div class="heroActions">
              <a class="btn primary" href="#objetivo"><i class="fa-solid fa-play"></i> Iniciar</a>
              <a class="btn" href="#estados"><i class="fa-solid fa-diagram-project"></i> Ver estados</a>
              <a class="btn" href="#carreta"><i class="fa-solid fa-truck-medical"></i> Carreta da Saúde</a>
              <a class="btn" href="#permissoes"><i class="fa-solid fa-table"></i> Permissões</a>
            </div>
          </div>

          <aside class="sidecard">
            <div>
              <div style="display:flex; align-items:center; justify-content:space-between; gap:10px;">
                <div>
                  <div style="font-weight:800; letter-spacing:.2px;">Resumo executivo</div>
                  <div style="color:var(--muted); font-size:12.5px; margin-top:4px; line-height:1.45">
                    Velocidade operacional, máquina de estados explícita, flexibilidade para exceções e conformidade legal de prioridade.
                  </div>
                </div>
                <div class="tag acc"><i class="fa-solid fa-shield-heart"></i>Saúde</div>
              </div>

              <div class="meta">
                <div class="metaitem">
                  <b><i class="fa-solid fa-gauge-high" style="margin-right:8px"></i>Princípio</b>
                  <span>Simplicidade, poucos cliques, baixa latência e operação fluida.</span>
                </div>
                <div class="metaitem">
                  <b><i class="fa-solid fa-clipboard-check" style="margin-right:8px"></i>Controle</b>
                  <span>Transições claras, logs/auditoria e prevenção de dupla chamada.</span>
                </div>
              </div>

              <div class="badges">
                <span class="badge good"><i class="fa-solid fa-check"></i> Reversões nativas</span>
                <span class="badge acc"><i class="fa-solid fa-route"></i> Fila por especialidade</span>
                <span class="badge warn"><i class="fa-solid fa-scale-balanced"></i> Prioridade legal</span>
              </div>
            </div>

            <div class="hint">
              Navegue pelo menu superior. O cabeçalho permanece visível e as seções são independentes para facilitar a apresentação.
            </div>
          </aside>
        </div>
      </div>
    </section>

    <!-- 1. Objetivo e Escopo -->
    <section class="section" id="objetivo">
      <div class="wrap">
        <div class="sectionHeader">
          <div>
            <h2>1) Objetivo e Escopo</h2>
            <p>Base operacional: agilidade, clareza de fluxo e capacidade de desfazer ações (dinâmica real de clínica).</p>
          </div>
        </div>

        <div class="grid">
          <div class="card span-7">
            <h3><i class="fa-solid fa-bullseye"></i> Objetivo</h3>
            <p>
              Estabelecer um sistema ágil e de fácil uso para a gestão do fluxo de pacientes, da emissão de senha ao encaminhamento ao médico e finalização do atendimento,
              reduzindo burocracia e cliques, com flexibilidade para reverter estados quando necessário.
            </p>
            <div class="hint">
              Diretriz: rapidez na recepção e no consultório + reversões para aderência à operação real.
            </div>
          </div>

          <div class="card span-5">
            <h3><i class="fa-solid fa-sitemap"></i> Escopo abrange</h3>
            <ul class="list">
              <li>Emissão de senhas para filas diversas</li>
              <li>Chamada de senhas e registro administrativo do atendimento</li>
              <li>Fila de pacientes aguardando o médico (por especialidade)</li>
              <li>Atendimento médico com observação e finalização (hora de saída)</li>
              <li>Reversões: remover senha, retornar para fila, priorizar, desfazer não compareceu, reabrir</li>
              <li>Recepção pode finalizar atendimentos e reverter estados; médico pode reabrir</li>
            </ul>
          </div>

          <div class="card span-12">
            <h3><i class="fa-solid fa-lock"></i> Regra estrutural da fila médica</h3>
            <p>
              A fila médica obedece ao critério de <b>especialidade</b>, evitando fila genérica.
              Alternativamente, pode operar por <b>médico indicado</b> (configurável) conforme modelo de atribuição.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- 2. Princípios -->
    <section class="section" id="design">
      <div class="wrap">
        <div class="sectionHeader">
          <div>
            <h2>2) Princípios de Desenho</h2>
            <p>Princípios não negociáveis para eficiência, previsibilidade e governança do fluxo.</p>
          </div>
        </div>

        <div class="grid">
          <div class="card span-4">
            <h3><i class="fa-solid fa-bolt"></i> Simplicidade e velocidade</h3>
            <p>Interface intuitiva, poucos cliques e fluidez operacional para reduzir tempo de espera e fricção.</p>
          </div>

          <div class="card span-4">
            <h3><i class="fa-solid fa-diagram-project"></i> Máquina de estados explícita</h3>
            <p>Estados e transições controladas, garantindo clareza operacional e auditabilidade.</p>
          </div>

          <div class="card span-4">
            <h3><i class="fa-solid fa-rotate-left"></i> Flexibilidade operacional</h3>
            <p>Desfazer e retornar ações como recurso nativo, refletindo a dinâmica real do atendimento em saúde.</p>
          </div>

          <div class="card span-12">
            <h3><i class="fa-solid fa-stethoscope"></i> Fila médica por especialidade</h3>
            <p>Encaminhamento e chamada obedecem especialidade (ou médico indicado), evitando sobrecarga de fila genérica.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- 3. Filas -->
    <section class="section" id="filas">
      <div class="wrap">
        <div class="sectionHeader">
          <div>
            <h2>3) Estrutura de Filas</h2>
            <p>Separação entre recepção (entrada) e fila médica (encaminhamento), com modelos configuráveis.</p>
          </div>
        </div>

        <div class="grid">
          <div class="card span-6">
            <h3><i class="fa-solid fa-ticket"></i> 3.1 Filas na recepção</h3>
            <ul class="list">
              <li>Divisões configuráveis: especialidade (recomendado), tipo de senha ou guichê</li>
              <li>Operação: chamar próximo (prioridade/ordem) ou chamar senha específica</li>
              <li>Suporta múltiplos atendentes na mesma fila</li>
            </ul>
          </div>

          <div class="card span-6">
            <h3><i class="fa-solid fa-user-doctor"></i> 3.2 Fila médica</h3>
            <ul class="list">
              <li>Critério de especialidade: paciente só é visível/chamável por médicos daquela especialidade</li>
              <li>Segmentação: “Encaminhado ao Médico” sempre filtrado por especialidade</li>
            </ul>
            <div class="hint">
              Modelo de atribuição pode ser por plantão (especialidade) ou médico responsável, conforme parâmetro.
            </div>
          </div>

          <div class="card span-12">
            <h3><i class="fa-solid fa-sliders"></i> Modelos de atribuição médica</h3>
            <div class="grid">
              <div class="card span-6" style="box-shadow:none; background:rgba(255,255,255,.02)">
                <h3><i class="fa-solid fa-layer-group"></i> Modelo A — médico opcional</h3>
                <p>Plantão: paciente atendido por qualquer médico disponível da especialidade; seleção de médico não é obrigatória.</p>
              </div>
              <div class="card span-6" style="box-shadow:none; background:rgba(255,255,255,.02)">
                <h3><i class="fa-solid fa-user-check"></i> Modelo B — médico obrigatório</h3>
                <p>Encaminhamento nominal: exige seleção do médico no registro/encaminhamento.</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 4. Estados -->
    <section class="section" id="estados">
      <div class="wrap">
        <div class="sectionHeader">
          <div>
            <h2>4) Máquina de Estados</h2>
            <p>Estados mínimos, estados futuros previstos e transições-chave por perfil, com simetria e legibilidade.</p>
          </div>
        </div>

        <div class="grid">
          <div class="card span-8">
            <h3><i class="fa-solid fa-diagram-project"></i> 4.1 Estados mínimos</h3>

            <div class="stateWrap">
              <div class="states">
                <div class="state">
                  <div class="top">
                    <div class="name">Aguardando (Recepção)</div>
                    <div class="tag acc">Entrada</div>
                  </div>
                  <p class="desc">Senha emitida e aguardando chamada pela recepção.</p>
                </div>

                <div class="state">
                  <div class="top">
                    <div class="name">Chamado (Recepção)</div>
                    <div class="tag warn">Chamada</div>
                  </div>
                  <p class="desc">Senha chamada; aguardando apresentação para registro.</p>
                </div>

                <div class="state">
                  <div class="top">
                    <div class="name">Em Registro (Recepção)</div>
                    <div class="tag acc">Transição</div>
                  </div>
                  <p class="desc">Registro administrativo (estado rápido de transição).</p>
                </div>

                <div class="state">
                  <div class="top">
                    <div class="name">Encaminhado ao Médico</div>
                    <div class="tag acc">Fila médica</div>
                  </div>
                  <p class="desc">Aguardando chamada do médico na fila da especialidade.</p>
                </div>

                <div class="state">
                  <div class="top">
                    <div class="name">Em Atendimento (Médico)</div>
                    <div class="tag good">Em execução</div>
                  </div>
                  <p class="desc">Paciente em atendimento médico.</p>
                </div>

                <div class="state">
                  <div class="top">
                    <div class="name">Em Observação</div>
                    <div class="tag warn">Monitoramento</div>
                  </div>
                  <p class="desc">Paciente colocado em observação pelo médico.</p>
                </div>

                <div class="state">
                  <div class="top">
                    <div class="name">Finalizado</div>
                    <div class="tag good">Saída</div>
                  </div>
                  <p class="desc">Atendimento concluído com hora de saída registrada.</p>
                </div>

                <div class="state">
                  <div class="top">
                    <div class="name">Não Compareceu</div>
                    <div class="tag bad">Exceção</div>
                  </div>
                  <p class="desc">Paciente não se apresentou após chamado pelo médico.</p>
                </div>

                <div class="state">
                  <div class="top">
                    <div class="name">Cancelado/Removido da Fila</div>
                    <div class="tag bad">Exceção</div>
                  </div>
                  <p class="desc">Senha removida do fluxo sem iniciar atendimento.</p>
                </div>
              </div>

              <div class="transitions">
                <h4><i class="fa-solid fa-arrow-right-arrow-left"></i> Transições-chave (baseline)</h4>
                <div class="kv">
                  <div class="kvi">
                    <b>Recepção</b>
                    <span class="mono">Aguardando → Chamado → Em Registro → Encaminhado</span>
                    <span style="display:block; margin-top:6px">+ Retornos, cancelamentos e finalização/reabertura conforme permissões.</span>
                  </div>
                  <div class="kvi">
                    <b>Médico</b>
                    <span class="mono">Encaminhado → Em Atendimento → (Em Observação) → Finalizado</span>
                    <span style="display:block; margin-top:6px">+ Reabertura do atendimento finalizado quando necessário.</span>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="card span-4">
            <h3><i class="fa-solid fa-road"></i> 4.2 Estados futuros (evolução)</h3>
            <ul class="list">
              <li>Aguardando Triagem</li>
              <li>Em Triagem</li>
              <li>Atendimento interrompido (para remarcação/agenda e cirúrgicos)</li>
            </ul>
            <div class="hint">
              Itens futuros ficam no backlog (parking lot) para evitar ruptura de escopo.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- 5. Perfis -->
    <section class="section" id="perfis">
      <div class="wrap">
        <div class="sectionHeader">
          <div>
            <h2>5) Ações por Perfil</h2>
            <p>Distribuição de capabilities por perfil, com ênfase em reversões e reabertura.</p>
          </div>
        </div>

        <div class="grid">
          <div class="card span-4">
            <h3><i class="fa-solid fa-headset"></i> Recepção</h3>
            <ul class="list">
              <li>Chamar próximo / senha específica</li>
              <li>Registrar atendimento e encaminhar ao médico</li>
              <li>Remover/cancelar senha e retornar à fila</li>
              <li>Tornar prioritária / remover prioridade</li>
              <li>Finalizar atendimento (quando médico esquece)</li>
              <li>Reabrir atendimento finalizado</li>
            </ul>
          </div>

          <div class="card span-4">
            <h3><i class="fa-solid fa-user-doctor"></i> Médico</h3>
            <ul class="list">
              <li>Chamar paciente (fila da especialidade)</li>
              <li>Colocar em observação (reflete no status)</li>
              <li>Finalizar atendimento com hora de saída</li>
              <li>Reabrir atendimento finalizado</li>
            </ul>
          </div>

          <div class="card span-4">
            <h3><i class="fa-solid fa-user-gear"></i> Administrador</h3>
            <ul class="list">
              <li>Configurar especialidades e divisões de fila</li>
              <li>Definir modelo de atribuição (A/B)</li>
              <li>Regras do painel (som, destaque, histórico)</li>
              <li>Regras de prioridade e permissões por perfil</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 6. Prioridade -->
    <section class="section" id="prioridade">
      <div class="wrap">
        <div class="sectionHeader">
          <div>
            <h2>6) Prioridade / Senha Preferencial (Brasil)</h2>
            <p>Requisito legal e operacional com evidência visual, ordenação e auditoria.</p>
          </div>
        </div>

        <div class="grid">
          <div class="card span-7">
            <h3><i class="fa-solid fa-scale-balanced"></i> Referências legais (alto nível)</h3>
            <ul class="list">
              <li>Lei nº 10.048/2000 — prioridade de atendimento</li>
              <li>Decreto nº 5.296/2004 — regulamentação</li>
              <li>Lei nº 13.146/2015 — Estatuto da Pessoa com Deficiência</li>
            </ul>
          </div>

          <div class="card span-5">
            <h3><i class="fa-solid fa-check-double"></i> Requisitos de sistema</h3>
            <ul class="list">
              <li>Marcação de prioridade (manual ou automática por idade)</li>
              <li>Evidência visual em todos os painéis</li>
              <li>Ordenação: prioridade + FIFO</li>
              <li>Alternância configurável (opcional) sem ferir legislação</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- 7. Campos -->
    <section class="section" id="dados">
      <div class="wrap">
        <div class="sectionHeader">
          <div>
            <h2>7) Campos Mínimos por Etapa</h2>
            <p>Dados mínimos para operar com velocidade e evoluir para prontuário/agenda sem retrabalho.</p>
          </div>
        </div>

        <div class="grid">
          <div class="card span-4">
            <h3><i class="fa-solid fa-ticket"></i> Emissão / Entrada de Senha</h3>
            <ul class="list">
              <li>Divisão / Especialidade (obrigatório)</li>
              <li>Número da senha</li>
              <li>Prioritário (Sim/Não)</li>
              <li>Observações rápidas (opcional)</li>
            </ul>
          </div>

          <div class="card span-8">
            <h3><i class="fa-solid fa-id-card"></i> Registro de Atendimento (Recepção)</h3>
            <ul class="list">
              <li>Paciente existente ou cadastro rápido</li>
              <li>Nome, Data de Nascimento, CPF (opção “não informado”), Telefone</li>
              <li>Dados adicionais opcionais (RG, CNS/SUS, endereço via CEP etc.)</li>
              <li>Foto 3x4 (opcional)</li>
              <li>Especialidade (herdada ou selecionada)</li>
              <li>Médico responsável (obrigatório ou opcional)</li>
              <li>Procedimento(s) (TUSS/SUS) — múltiplos por atendimento</li>
              <li>Origem/Procedência</li>
              <li>Status automático: Encaminhado ao Médico</li>
            </ul>
          </div>

          <div class="card span-12">
            <h3><i class="fa-solid fa-flag-checkered"></i> Finalização (Médico ou Recepção)</h3>
            <ul class="list">
              <li>Hora de Saída (obrigatório; auto-preenchida e editável)</li>
              <li>Motivo/Justificativa (opcional)</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Carreta -->
    <section class="section" id="carreta">
      <div class="wrap">
        <div class="sectionHeader">
          <div>
            <h2>Fluxo de Atendimento — Carreta da Saúde</h2>
            <p>Jornada ampliada com cadastro robusto, confirmação configurável, especialidades/exames e fechamento diário.</p>
          </div>
        </div>

        <div class="grid">
          <div class="card span-6">
            <h3><i class="fa-solid fa-ticket-simple"></i> Geração de Senha</h3>
            <ul class="list">
              <li>Senha manual (azul normal, vermelho prioritária)</li>
              <li>Totem futuro (tablet + impressora bluetooth)</li>
              <li>Filas físicas separadas (registro x triagem)</li>
              <li>Quantidade diária configurável (ex.: 150)</li>
            </ul>
          </div>

          <div class="card span-6">
            <h3><i class="fa-solid fa-address-card"></i> Chamada e Cadastro</h3>
            <ul class="list">
              <li>Chamada sequencial (normal e preferencial)</li>
              <li>Fila única nesta etapa (normal x preferencial)</li>
              <li>Cadastro: CPF, SUS, endereço via CEP, foto e anexos</li>
              <li>Convênio: Prefeitura Duque de Caxias</li>
              <li>Encaminhamento: clínico geral</li>
              <li>Impressão de ficha/termos</li>
            </ul>
          </div>

          <div class="card span-12">
            <h3><i class="fa-solid fa-user-doctor"></i> Atendimento, Confirmação, Especialidades e Fechamento</h3>
            <ul class="list">
              <li>Atendimento clínico com registro em prontuário e cobrança por procedimento</li>
              <li>Confirmação de encaminhamento configurável (ativa/inativa)</li>
              <li>Especialidades/exames com reencaminhamentos</li>
              <li>Relatório do fluxo do paciente para assinatura (parâmetro imprime/não imprime)</li>
              <li>Relatório de produção por médico + fechamento diário para prestação de contas</li>
              <li>Parâmetros de repasse médico (plantão ou produtividade)</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Algoritmo -->
    <section class="section" id="algoritmo">
      <div class="wrap">
        <div class="sectionHeader">
          <div>
            <h2>Motor de Chamada e Ordenação</h2>
            <p>Filtragem por especialidade/divisão, prioridade e FIFO por timestamp, com logs e baixa latência.</p>
          </div>
        </div>

        <div class="grid">
          <div class="card span-6">
            <h3><i class="fa-solid fa-arrow-right-to-bracket"></i> Entradas</h3>
            <ul class="list">
              <li>Especialidade/Divisão</li>
              <li>Conjunto elegível (Aguardando / Encaminhado)</li>
              <li>Flags de prioridade</li>
              <li>Timestamps</li>
              <li>Filtros por perfil (médico por especialidade)</li>
            </ul>
          </div>

          <div class="card span-6">
            <h3><i class="fa-solid fa-gears"></i> Regras</h3>
            <ul class="list">
              <li>Filtrar sempre por especialidade/divisão</li>
              <li>Prioridade primeiro</li>
              <li>FIFO dentro de cada grupo</li>
              <li>Regras configuráveis: alternância, limites, desempate</li>
              <li>Ações manuais permitidas, sempre auditadas</li>
            </ul>
          </div>

          <div class="card span-12">
            <h3><i class="fa-solid fa-shield"></i> Saídas e requisitos não funcionais</h3>
            <ul class="list">
              <li>Próxima senha recomendada + lista ordenada</li>
              <li>Eventos/logs por chamada e alteração</li>
              <li>Atualização de painéis</li>
              <li>Baixa latência • Consistência • Prevenção de dupla chamada</li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Permissões -->
    <section class="section" id="permissoes">
      <div class="wrap">
        <div class="sectionHeader">
          <div>
            <h2>Tabela de Permissões (Resumo Operacional)</h2>
            <p>Matriz de permissões por perfil. Base para configuração e governança de acessos.</p>
          </div>
        </div>

        <div class="grid">
          <div class="card span-12">
            <div class="tableWrap" role="region" aria-label="Tabela de Permissões">
              <table>
                <thead>
                  <tr>
                    <th>Ação</th>
                    <th>Recepção</th>
                    <th>Médico</th>
                    <th>Admin</th>
                    <th>Observações</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td data-label="Ação"><b>Emitir Senha</b></td>
                    <td data-label="Recepção"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Médico"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Admin"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Observações" class="notes">Geração de nova senha para o fluxo.</td>
                  </tr>
                  <tr>
                    <td data-label="Ação"><b>Chamar Próximo</b></td>
                    <td data-label="Recepção"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Médico"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Admin"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Observações" class="notes">Chamada automática respeitando prioridade/ordem.</td>
                  </tr>
                  <tr>
                    <td data-label="Ação"><b>Chamar Senha Específica</b></td>
                    <td data-label="Recepção"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Médico"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Admin"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Observações" class="notes">Intervenção manual operacional (logada).</td>
                  </tr>
                  <tr>
                    <td data-label="Ação"><b>Registrar Atendimento</b></td>
                    <td data-label="Recepção"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Médico"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Admin"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Observações" class="notes">Vincula senha ao paciente e encaminha para fila médica.</td>
                  </tr>
                  <tr>
                    <td data-label="Ação"><b>Remover/Cancelar Senha</b></td>
                    <td data-label="Recepção"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Médico"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Admin"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Observações" class="notes">Remove senha do fluxo antes do registro/início.</td>
                  </tr>
                  <tr>
                    <td data-label="Ação"><b>Tornar/Remover Prioridade</b></td>
                    <td data-label="Recepção"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Médico"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Admin"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Observações" class="notes">Impacta ordenação e evidência visual.</td>
                  </tr>
                  <tr>
                    <td data-label="Ação"><b>Chamar Paciente (Médico)</b></td>
                    <td data-label="Recepção"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Médico"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Admin"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Observações" class="notes">Fila filtrada por especialidade.</td>
                  </tr>
                  <tr>
                    <td data-label="Ação"><b>Finalizar / Reabrir Atendimento</b></td>
                    <td data-label="Recepção"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Médico"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Admin"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Observações" class="notes">Finalização com hora de saída; reabertura por correção/retomada.</td>
                  </tr>
                  <tr>
                    <td data-label="Ação"><b>Configurar Filas/Prioridade/Permissões</b></td>
                    <td data-label="Recepção"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Médico"><span class="permit no"><i class="fa-solid fa-xmark"></i> Não</span></td>
                    <td data-label="Admin"><span class="permit yes"><i class="fa-solid fa-check"></i> Permitido</span></td>
                    <td data-label="Observações" class="notes">Gestão de dados mestres e governança de acesso.</td>
                  </tr>
                </tbody>
              </table>
            </div>

            <div class="hint" style="margin-top:12px">
              Recomendação: toda ação manual (chamar senha específica, alterar prioridade, reabrir/finalizar por exceção) deve gerar log para auditoria.
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Parâmetros -->
    <section class="section" id="parametros">
      <div class="wrap">
        <div class="sectionHeader">
          <div>
            <h2>Parâmetros e Configurações</h2>
            <p>Itens que precisam estar configurados para operar com previsibilidade e rastreabilidade.</p>
          </div>
        </div>

        <div class="grid">
          <div class="card span-6">
            <h3><i class="fa-solid fa-sliders"></i> Operação e fluxo</h3>
            <ul class="list">
              <li>Confirmação de atendimento (utiliza / não utiliza)</li>
              <li>Impressão de relatórios no final (imprime / não imprime)</li>
              <li>Modelo de atribuição médica (A/B)</li>
              <li>Regras do painel (som, destaque, histórico)</li>
            </ul>
          </div>

          <div class="card span-6">
            <h3><i class="fa-solid fa-layer-group"></i> Procedimentos e limites</h3>
            <ul class="list">
              <li>Tabela de procedimentos com grupo/classificação</li>
              <li>Limite por procedimento/grupo por período e convênio</li>
              <li>Regras de prioridade e alternância</li>
            </ul>
          </div>

          <div class="card span-12">
            <h3><i class="fa-solid fa-user-shield"></i> Governança de acesso</h3>
            <p>
              Permissões por perfil devem estar alinhadas com o modelo operacional do cliente.
              Recomenda-se trilha de auditoria para: chamadas manuais, alterações de prioridade, reaberturas, finalizações por exceção e mudanças de parâmetros.
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <section class="footer">
      <div class="wrap">
        <div class="line">
          <div>
            <b style="color: rgba(255,255,255,.82);">Fluxo de Atendimento</b>
            <div style="margin-top:4px">Documento de apresentação — HTML responsivo para Kickoff/Onboarding.</div>
          </div>
          <div>
            <span class="kbd">Ctrl</span> + <span class="kbd">F</span> para buscar termos •
            <a class="kbd" href="#top">Topo</a>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script>
    // Active nav highlight on scroll
    const chips = Array.from(document.querySelectorAll(".chip"));
    const sections = chips
      .map(a => document.querySelector(a.getAttribute("href")))
      .filter(Boolean);

    function setActive(id){
      chips.forEach(a => a.classList.toggle("active", a.getAttribute("href") === "#" + id));
    }

    const obs = new IntersectionObserver((entries) => {
      const visible = entries
        .filter(e => e.isIntersecting)
        .sort((a,b)=> b.intersectionRatio - a.intersectionRatio)[0];
      if(visible && visible.target && visible.target.id){
        setActive(visible.target.id);
      }
    }, { root: null, rootMargin: "-35% 0px -55% 0px", threshold: [0.06, 0.12, 0.18] });

    sections.forEach(s => obs.observe(s));

    // Smooth anchor offset for sticky header
    chips.forEach(a => {
      a.addEventListener("click", (ev) => {
        const href = a.getAttribute("href");
        if(!href || !href.startsWith("#")) return;
        const el = document.querySelector(href);
        if(!el) return;
        ev.preventDefault();
        const y = el.getBoundingClientRect().top + window.scrollY - 78;
        window.scrollTo({ top: y, behavior: "smooth" });
      });
    });
  </script>
</body>
</html>
